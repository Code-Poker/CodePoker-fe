import{ssr as l,ssrHydrationKey as u,escape as a,createComponent as s,For as _,ssrAttribute as m,mergeProps as k,Portal as W,isServer as G,getRequestEvent as M,ssrElement as $,useAssets as D,NoHydration as L,HydrationScript as J,Hydration as K,renderToStream as Y}from"solid-js/web";import{createSignal as b,createResource as I,createEffect as Q,Suspense as j,Show as z,children as X,onCleanup as Z,ErrorBoundary as ee,lazy as te,createComponent as re,sharedConfig as A}from"solid-js";import{provideRequestEvent as ne}from"solid-js/web/storage";import{H3Event as R,setResponseStatus as se,sendRedirect as oe,getCookie as ae,setCookie as ie,setHeader as ce,getRequestURL as le,getRequestIP as ue,getResponseStatus as de,getResponseStatusText as he,getResponseHeaders as pe,getResponseHeader as fe,setResponseHeader as ge,appendResponseHeader as me,getRequestWebStream as ve,removeResponseHeader as ye,eventHandler as be}from"h3";import{getContext as $e}from"unctx";import{AsyncLocalStorage as we}from"node:async_hooks";import{createRouter as Re}from"radix3";const x="https://codepoker.w8385.dev/",xe=async()=>(await fetch(x+"poker")).json(),Ce=async e=>(console.log("fetching",e),e=="recent"?(await(await fetch(x+"poker/"+e)).json()).result:(await(await fetch(x+"poker/"+e)).json()).result);var Se=["<div",' class="loader">Loading...</div>'];function O(){return l(Se,u())}var _e=["<div",' class="grid md:grid-cols-3 xl:grid-cols-4 gap-6 w-full overflow-scroll">',"</div>"],ke=["<a","><div","><!--$-->","<!--/--> : <!--$-->","<!--/--> 	 <!--$-->","<!--/--></div></a>"];function Te(e){return console.log(e.problems),l(_e,u(),a(s(_,{get each(){return e.problems},children:r=>s(Ee,r)})))}function Ee(e){const[r,t]=b("bg-[#000]");e.level==0?t("bg-gray-900 text-red-500"):e.level<7?t("bg-[#c67739]"):e.level<21?t("bg-[#4e6a86]"):e.level<60?t("bg-[#ffb028]"):e.level<159?t("bg-[#51fdbd]"):e.level<412?t("bg-[#2bbfff]"):e.level<801&&t("bg-[#ff3071]");const n="https://boj.kr/"+e.id;return l(ke,u()+m("href",a(n,!0),!1),m("class",a(r(),!0),!1),a(e.id),a(e.title),a(e.level))}var Ae=["<div",' class="result-view grid md:grid-cols-3 xl:grid-cols-4 gap-6 w-full p-6">',"</div>"],He=["<div",' class="background"></div>'],qe=["<div",' class="modal">',"</div>"],Fe=["<button",">","</button>"],Pe=["<img",' width="30" height="30" src="https://static.solved.ac/logo.svg">'],Me=["<div",' class="rounded-lg border bg-card text-card-foreground shadow-sm cursor-pointer" data-v0-t="card"><div class="p-6 flex flex-col items-center"><img',' width="150" height="150" alt="User 1" class="rounded-full border-2 border-gray-100" style="aspect-ratio:150 / 150;object-fit:cover;"><div class="flex"><h2 class="text-lg font-semibold pr-2">',"</h2><!--$-->",'<!--/--></div></div><div class="items-center px-6 pb-6 flex justify-between"><div class="flex flex-col text-sm"><span class="font-semibold">Points</span><span class="text-sm text-gray-500 dark:text-gray-400">','</span></div><div class="flex flex-col text-sm"><span class="font-semibold">Goal</span><span class="text-sm text-gray-500 dark:text-gray-400">',"</span></div></div></div>"];function Le(e){const[r,t]=b("recent"),[n]=I(r,Ce);return Q(()=>t(e.id)),l(Ae,u(),a(s(j,{get fallback(){return s(O,{})},get children(){return s(_,{get each(){return Object.keys(n()===void 0?{}:n())},children:o=>s(je,k(()=>n()[o]))})}})))}function Ie(e){const[r,t]=b(!1),n=X(()=>e.children);return s(z,{get when(){return r()},get fallback(){return l(Fe,u(),a(n()))},get children(){return s(W,{get children(){return[l(He,u()),l(qe,u(),a(s(Te,e)))]}})}})}function je(e){return s(Ie,k(e,{get children(){return l(Me,u(),m("src",a(e.profileImage,!0),!1),a(e.handle),a(s(z,{get when(){return e.goal<=e.point},get children(){return l(Pe,u())}})),a(e.point),a(e.goal))}}))}var ze=["<ul",' class="poker-list">',"</ul>"],Oe=["<div",' class="side-nav"><div><!--$-->',"<!--/--><!--$-->","<!--/--></div></div>"],Ne=["<li",' class="','">',"</li>"],Be=["<div",' class="logo"><!--$-->','<!--/--><div class="title">Code Poker</div></div>'],Ue=["<div",' class="icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="_x31_0_x2C__Ace_Of_Spades_x2C__Poker_x2C__Casino_x2C__Gambler_x2C__Gambling_x2C__Cards_x2C__Shapes_x2C__Bet"><g><path style="fill:#FFFFFF;" d="M421,41v430c0,16.57-13.43,30-30,30H121c-16.57,0-30-13.43-30-30V41c0-16.57,13.43-30,30-30h270    C407.57,11,421,24.43,421,41z"></path><path style="fill:#FFFFFF;" d="M375.84,402.59c7.31,8.75,6.85,21.8-1.37,30.02c-4.35,4.35-10.06,6.53-15.76,6.53    c-5.1,0-10.19-1.74-14.33-5.22c-8.76,7.37-21.85,6.93-30.09-1.31c-4.35-4.35-6.53-10.05-6.53-15.76c0-5.07,1.72-10.14,5.17-14.26    c0.42-0.52,0.88-1.02,1.36-1.5L344.38,371l30.09,30.09C374.95,401.57,375.41,402.07,375.84,402.59z"></path><path style="fill:#FFFFFF;" d="M199.08,82.59c7.31,8.75,6.85,21.8-1.37,30.02c-4.35,4.35-10.06,6.53-15.76,6.53    c-5.1,0-10.2-1.74-14.33-5.22c-8.76,7.37-21.85,6.93-30.09-1.31c-4.35-4.35-6.53-10.05-6.53-15.76c0-5.07,1.72-10.14,5.16-14.26    c0.43-0.52,0.89-1.02,1.37-1.5L167.62,51l30.09,30.09C198.19,81.57,198.65,82.07,199.08,82.59z"></path><path style="fill:#000;" d="M333.62,230.19c18.04,21.61,16.92,53.8-3.37,74.09c-10.74,10.74-24.82,16.11-38.89,16.11    c-12.58,0-25.16-4.29-35.36-12.87c-21.61,18.18-53.91,17.1-74.25-3.24c-10.74-10.74-16.11-24.81-16.11-38.89    c0-12.52,4.25-25.03,12.74-35.2c1.05-1.27,2.18-2.5,3.37-3.69L256,152.25l74.25,74.25C331.44,227.69,332.57,228.92,333.62,230.19z    "></path><g><path style="fill:#000;" d="M391,1H121C98.944,1,81,18.944,81,41v430c0,22.056,17.944,40,40,40h270c22.056,0,40-17.944,40-40     V41C431,18.944,413.056,1,391,1z M411,471c0,11.028-8.972,20-20,20H121c-11.028,0-20-8.972-20-20V41c0-11.028,8.972-20,20-20h270     c11.028,0,20,8.972,20,20V471z"></path><path style="fill:#000;" d="M306.001,359.75c0-5.523-4.478-10-10-10h-30v-24.514c23.538,9.96,51.868,5.567,71.321-13.885     c23.848-23.848,25.414-61.889,4.007-87.532c-3.339-4.039-1.389-1.644-78.257-78.64c-3.906-3.905-10.236-3.905-14.143,0     l-74.248,74.249c-25.214,25.197-25.561,66.365-0.002,91.923c19.195,19.196,47.568,23.965,71.321,13.903v24.496h-30.002     c-5.522,0-10,4.477-10,10s4.478,10,10,10c25.424,0,54.577,0,80.002,0C301.523,369.75,306.001,365.273,306.001,359.75z      M188.822,297.208c-16.826-16.825-17.331-43.163-2.733-60.647c2.191-2.649-0.735,0.566,69.912-70.169l67.181,67.18     c17.694,17.703,17.69,45.944-0.002,63.636c-16.223,16.224-42.263,17.926-60.784,2.626c-3.635-3.033-9.056-3.132-12.832,0.033     C231.875,314.748,205.194,313.581,188.822,297.208z"></path><path style="fill:#000;" d="M157.619,141c0,5.523,4.478,10,10,10s10-4.477,10-10v-12.164     c28.999,3.932,48.061-29.987,29.168-52.616c-1.631-1.977-0.303-0.432-32.097-32.292c-3.906-3.905-10.236-3.905-14.143,0     c-31.606,31.673-30.447,30.298-32.062,32.249c-10.512,12.591-10.044,31.491,1.971,43.505c7.303,7.302,17.466,10.373,27.162,9.095     V141z M141,96.851c0-3.157,1.227-6.313,3.6-8.689l23.02-23.02l23.02,23.02c7.644,7.63,2.281,20.979-8.689,20.979     c-2.803,0-5.553-0.931-7.93-2.896c-3.74-3.121-9.158-3.055-12.837,0.029C153.335,112.876,141,107.358,141,96.851z"></path><path style="fill:#000;" d="M351.453,363.929c-3.89-3.889-10.225-3.916-14.143,0c-31.767,31.833-30.477,30.327-32.061,32.248     c-10.515,12.592-10.043,31.494,1.97,43.506c7.303,7.303,17.466,10.372,27.162,9.095V461c0,5.523,4.478,10,10,10s10-4.477,10-10     v-12.806c10.714,0.551,22.586-3.937,27.161-8.511c12.691-12.692,12.703-32.951,0-45.663L351.453,363.929z M367.4,425.54     c-4.382,4.383-11.488,4.945-16.619,0.704c-3.653-3.049-9.063-3.115-12.798-0.002c-5.105,4.238-12.3,3.619-16.623-0.702     c-4.548-4.549-4.783-11.726-0.724-16.588c0.577-0.698-0.461,0.418,23.744-23.81c24.298,24.322,23.133,23.072,23.779,23.852     C372.188,413.819,371.854,421.086,367.4,425.54z"></path></g></g></g><g id="Layer_1"></g></svg></div>'];function Ve(){const[e,r]=b("recent"),[t]=I(xe);return[l(Oe,u(),a(s(We,{})),a(s(j,{get fallback(){return s(O,{})},get children(){return l(ze,u(),a(s(_,{get each(){return t()},children:n=>(e()==="recent"&&r(n.id),l(Ne,u()+m("key",a(n.id,!0),!1),e()===n.id?"selected":"",a(n.name)))})))}}))),s(Le,{get id(){return e()}})]}function We(){return l(Be,u(),a(s(Ge,{})))}function Ge(){return l(Ue,u())}function De(e){if(G){const r=M();r.response.status=e.code,r.response.statusText=e.text,Z(()=>!r.nativeEvent.handled&&(r.response.status=200))}return null}function Je(e){return s(ee,{get fallback(){return s(De,{code:500})},get children(){return e.children}})}var Ke=" ";const Ye={style:e=>$("style",e.attrs,()=>a(e.children),!0),link:e=>$("link",e.attrs,void 0,!0),script:e=>e.attrs.src?$("script",k(()=>e.attrs,{get id(){return e.key}}),()=>l(Ke),!0):null};function C(e){let{tag:r,attrs:{key:t,...n}={key:void 0},children:o}=e;return Ye[r]({attrs:n,key:t,children:o})}var Qe=["<script",">","<\/script>"],Xe=["<script",' type="module" async',"><\/script>"];const Ze=l("<!DOCTYPE html>");function N(e,r,t=[]){for(let n=0;n<r.length;n++){const o=r[n];if(o.path!==e[0].path)continue;let i=[...t,o];if(o.children){const c=e.slice(1);if(c.length===0||(i=N(c,o.children,i),!i))continue}return i}}function et(e){const r=M();let t=[];return Promise.resolve().then(async()=>{if(r.router&&r.router.matches){const n=[...r.router.matches];for(;n.length&&(!n[0].info||!n[0].info.filesystem);)n.shift();const o=n.length&&N(n,r.routes);if(o)for(let i=0;i<o.length;i++){const c=o[i],v=await globalThis.MANIFEST.client.inputs[c.$component.src].assets();t.push.apply(t,v)}else console.warn("No route matched for preloading js assets")}t=[...new Map(t.map(n=>[n.attrs.key,n])).values()].filter(n=>n.attrs.rel==="modulepreload"&&!r.assets.find(o=>o.attrs.key===n.attrs.key))}),D(()=>t.length?t.map(n=>C(n)):void 0),s(L,{get children(){return[Ze,s(e.document,{get assets(){return[s(J,{}),r.assets.map(n=>C(n))]},get scripts(){return[l(Qe,u(),`window.manifest = ${JSON.stringify(r.manifest)}`),l(Xe,u(),m("src",a(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return s(K,{get children(){return s(Je,{get children(){return s(Ve,{})}})}})}})]}})}function tt(e){let r;const t=B(e),n={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(t,{...n,body:e.node.req.body}):new Request(t,{...n,get body(){return r||(r=pt(e),r)}})}function rt(e){return e.web??={request:tt(e),url:B(e)},e.web.request}function nt(){return mt()}const T=Symbol("$HTTPEvent");function st(e){return typeof e=="object"&&(e instanceof R||e?.[T]instanceof R||e?.__is_event__===!0)}function d(e){return function(...r){let t=r[0];if(st(t))r[0]=t instanceof R||t.__is_event__?t:t[T];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(t=nt(),!t)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");r.unshift(t)}return e(...r)}}const B=d(le),ot=d(ue),S=d(se),H=d(de),at=d(he),y=d(pe),q=d(fe),it=d(ge),ct=d(me),lt=d(oe),ut=d(ae),dt=d(ie),ht=d(ce),pt=d(ve),ft=d(ye);function gt(){return $e("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:we})}function mt(){return gt().use().event}const U=[],vt=yt(U.filter(e=>e.$component));function yt(e){function r(t,n,o,i){const c=Object.values(t).find(h=>o.startsWith(h.id+"/"));return c?(r(c.children||(c.children=[]),n,o.slice(c.id.length)),t):(t.push({...n,id:o,path:o.replace(/\/\([^)/]+\)/g,"")}),t)}return e.sort((t,n)=>t.path.length-n.path.length).reduce((t,n)=>r(t,n,n.path,n.path),[])}function bt(e,r){const t=wt.lookup(e);if(t){const n=t.route[`$${r}`];return n===void 0?void 0:{handler:n,params:t.params}}}function $t(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const wt=Re({routes:U.reduce((e,r)=>{if(!$t(r))return e;let t=r.path.replace(/\(.*\)\/?/g,"").replace(/\*([^/]*)/g,(n,o)=>`**:${o}`);if(/:[^/]*\?/g.test(t))throw new Error(`Optional parameters are not supported in API routes: ${t}`);if(e[t])throw new Error(`Duplicate API routes for "${t}" found at "${e[t].route.path}" and "${r.path}"`);return e[t]={route:r},e},{})}),w=Symbol("fetchEvent");function Rt(e){return{request:rt(e),response:St(e),clientAddress:ot(e),locals:{},nativeEvent:e,[T]:e}}function xt(e){if(!e[w]){const r=Rt(e);e[w]=r}return e[w]}class Ct{constructor(r){this.event=r}get(r){const t=q(this.event,r);return Array.isArray(t)?t.join(", "):t}has(r){return this.get(r)!==void 0}set(r,t){return it(this.event,r,t)}delete(r){return ft(this.event,r)}append(r,t){ct(this.event,r,t)}getSetCookie(){const r=q(this.event,"Set-Cookie");return Array.isArray(r)?r:[r]}forEach(r){return Object.entries(y(this.event)).forEach(([t,n])=>r(Array.isArray(n)?n.join(", "):n,t,this))}entries(){return Object.entries(y(this.event)).map(([r,t])=>[r,Array.isArray(t)?t.join(", "):t])[Symbol.iterator]()}keys(){return Object.keys(y(this.event))[Symbol.iterator]()}values(){return Object.values(y(this.event)).map(r=>Array.isArray(r)?r.join(", "):r)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function St(e){return{get status(){return H(e)},set status(r){S(e,r)},get statusText(){return at(e)},set statusText(r){S(e,H(),r)},headers:new Ct(e)}}function _t(e){e.forEach(r=>{if(!r.attrs.href)return;let t=document.head.querySelector(`link[href="${r.attrs.href}"]`);t||(t=document.createElement("link"),t.setAttribute("rel","preload"),t.setAttribute("as","style"),t.setAttribute("href",r.attrs.href),document.head.appendChild(t))})}function kt(e,r,t,n="default"){return te(async()=>{{const i=(await e.import())[n],h=(await r.inputs?.[e.src].assets()).filter(p=>p.tag==="style"||p.attrs.rel==="stylesheet");return typeof window<"u"&&_t(h),{default:p=>[...h.map(f=>C(f)),re(i,p)]}}})}function Tt(){function e(t){return{...t,...t.$$route?t.$$route.require().route:void 0,info:{...t.$$route?t.$$route.require().route.info:{},filesystem:!0},component:kt(t.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:t.children?t.children.map(e):void 0}}return vt.map(e)}function Et(e){const r=ut(e,"flash");if(!r)return;let t=JSON.parse(r);if(!t||!t.result)return[];const n=[...t.input.slice(0,-1),new Map(t.input[t.input.length-1])];return dt(e,"flash","",{maxAge:0}),{url:t.url,result:t.error?new Error(t.result):t.result,input:n}}async function V(e){const r=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await r.json(),assets:[...await r.inputs[r.handler].assets()],router:{submission:Et(e)},routes:Tt(),$islands:new Set})}function At(e,r={}){return be({onRequest:r.onRequest,onBeforeResponse:r.onBeforeResponse,handler:t=>{const n=xt(t);return ne(n,async()=>{const o=bt(new URL(n.request.url).pathname,n.request.method);if(o){const g=(await o.handler.import())[n.request.method];n.params=o.params,A.context={event:n};const E=await g(n);if(E!==void 0)return E;if(n.request.method!=="GET")throw new Error(`API handler for ${n.request.method} "${n.request.url}" did not return a response.`)}const i=await V(n);let c={...r};if(c.onCompleteAll){const f=c.onCompleteAll;c.onCompleteAll=g=>{P(i)(g),f(g)}}else c.onCompleteAll=P(i);if(c.onCompleteShell){const f=c.onCompleteShell;c.onCompleteShell=g=>{F(i,t)(),f(g)}}else c.onCompleteShell=F(i,t);const h=Y(()=>(A.context.event=i,e(i)),c);if(i.response&&i.response.headers.get("Location"))return lt(n,i.response.headers.get("Location"));const{writable:v,readable:p}=new TransformStream;return h.pipeTo(v),p})}})}function F(e,r){return()=>{e.response&&e.response.headers.get("Location")&&(S(r,302),ht(r,"Location",e.response.headers.get("Location")))}}function P(e){return({write:r})=>{const t=e.response&&e.response.headers.get("Location");t&&r(`<script>window.location="${t}"<\/script>`)}}function Ht(e,r={}){return At(e,{...r,createPageEvent:V})}var qt=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico">',"</head>"],Ft=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const Nt=Ht(()=>s(et,{document:({assets:e,children:r,scripts:t})=>l(Ft,u(),s(L,{get children(){return l(qt,a(e))}}),a(r),a(t))}));export{Nt as default};
